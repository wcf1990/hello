(function(a){a.stringCtoh=function(d){d=d?""+d:"";var b="";for(var c=0;c<d.length;c++){if(d.charCodeAt(c)==12288){b+=String.fromCharCode(d.charCodeAt(c)-12256);continue}if(d.charCodeAt(c)>65280&&d.charCodeAt(c)<65375){b+=String.fromCharCode(d.charCodeAt(c)-65248)}else{b+=String.fromCharCode(d.charCodeAt(c))}}return b};a.form=a.form||{};a.extend(a.form,{settings:{initTip:function(b,c){b.after(a("<span class='tip tip-default'></span>").text(c||""))},validTip:function(b,d,c){if(d){b.next().removeClass("tip-default").addClass("tip-error").text(d)}else{b.next().removeClass("tip-error").addClass("tip-default").text(c||"")}}},regValids:{alpha:/^[A-Za-z]+$/,alphanumber:/^[A-Za-z0-9]+$/,integer:/^\d+$/,number:/^[+-]?(\d+(\.\d*)?|\.\d+)([Ee]-?\d+)?$/,mobile:/^1[3458]\d{9}$/,email:/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/,chinese:/^[\u4e00-\u9fa5]*$/},valid:function(d,f){d=d||{};var c={},g="",e={};d.vReturn="";if((!d.data("validater")&&!f)){return""}c=a.extend(c,d.data("validater"),f);g=d.val();if(c.trim!==false){g=a.trim(g);d.val(g)}if(c.stringCtoh===true){g=a.stringCtoh(g);d.val(g)}if(c.begin&&typeof c.begin==="function"){g=c.begin(d)}var b=g||"";c.showName=c.showName||"";if(!c.required&&b.length==0){d.vReturn=""}else{if(c.required&&b.length==0){d.vReturn=c.requiredTip||c.showName+"\u4e0d\u80fd\u4e3a\u7a7a"}else{if(c.len&&b.length!=c.len){d.vReturn=c.lenTip||c.showName+"\u957f\u5ea6\u5fc5\u987b\u4e3a:"+c.len}else{if(c.minlen&&b.length<c.minlen){d.vReturn=c.lenTip||c.showName+"\u957f\u5ea6\u4e0d\u5c0f\u4e8e\uff1a "+c.minlen}else{if(c.maxlen&&b.length>c.maxlen){d.vReturn=c.lenTip||c.showName+"\u957f\u5ea6\u4e0d\u8d85\u8fc7 \uff1a"+c.maxlen}else{if(c.regexp&&!c.regexp.test(b)){d.vReturn=c.errorTip||c.showName+"\u9a8c\u8bc1\u4e0d\u901a\u8fc7"}else{if(c.validFun&&typeof c.validFun==="function"){e=c.validFun(g,d);d.vReturn=e.errorInfo}else{}}}}}}}if(d.vReturn){if(c.failed&&typeof c.failed==="function"){c.failed(d,e)}}else{if(c.success&&typeof c.success==="function"){c.success(d,e)}}if(c.end&&typeof c.end==="function"){c.end(d,e)}return d.vReturn},validTip:function(b){var c=a(b).data("validater")||{};if(c.type){var d=this.regValids[c.type];if(d){if(d instanceof RegExp){c.regexp=d}else{if(typeof d==="function"){c.regexp=d(c)}else{if(typeof d.check==="function"){c.validFun=function(e){return d.check.call(d,e)}}}}}}a(b).each(function(){a.form.settings.initTip(a(this),c.defaultTip);a(this).on((c.option||"noListenner"),function(){if(c.before&&typeof c.before==="function"){c.before(a(this))}var e=a.form.valid(a(this),c);a.form.settings.validTip(a(this),e,c.defaultTip);if(c.after&&typeof c.after==="function"){c.after(a(this),e)}})})},render:function(e,c){for(var b in e){var f=e[b]||{},d=a(b).data("validater")||{};a.extend(d,c);a(b).data("validater",d);this.validTip(b,a.extend(d,f))}}});a.fn.extend({valid:function(b){return a.form.valid(this,b)},formValid:function(b,f,c){var e="",d=null,c=c||a.form.settings;f=f||{};this.find(b||"[name]").each(function(){if(f.interrupt&&d){return}var g=a(this).valid(f.get?f.get(this.name):f);e+=g;if(g&&!d){d=a(this);d.focus().blur()}c.validTip(a(this),g)});return e?false:true},validAttr:function(b,d){var c=this.data("validater")||{};if(typeof b==="object"){a.extend(c,b);return this}else{if(b&&d){c[b]=d}else{if(b){return c[b]}else{return c}}}return this}})})(jQuery);
