(function(a){a.extend(a.form.regValids,{cardNum:/(^\d{15}$)|(^\d{17}(\d|X)$)/,date:function(b){var d=b.dateFormat||"yyyy-MM-dd";var c="^"+d.replace(/\s/g,"\\s").replace("yyyy","[0-9]{4}").replace("MM","([0][1-9]|[1][0-2])").replace("dd","([0-2][0-9]|[3][0-1])").replace("hh","([0][1-9]|[1][0-2])").replace("HH","([0-1][0-9]|[2][0-3])").replace("mm","[0-5][0-9]").replace("ss","[0-5][0-9]").replace("SS","[0-9]{1,3}")+"$";return new RegExp(c)},IdCard:{area:{11:"\u5317\u4eac",12:"\u5929\u6d25",13:"\u6cb3\u5317",14:"\u5c71\u897f",15:"\u5185\u8499\u53e4",21:"\u8fbd\u5b81",22:"\u5409\u6797",23:"\u9ed1\u9f99\u6c5f",31:"\u4e0a\u6d77",32:"\u6c5f\u82cf",33:"\u6d59\u6c5f",34:"\u5b89\u5fbd",35:"\u798f\u5efa",36:"\u6c5f\u897f",37:"\u5c71\u4e1c",41:"\u6cb3\u5357",42:"\u6e56\u5317",43:"\u6e56\u5357",44:"\u5e7f\u4e1c",45:"\u5e7f\u897f",46:"\u6d77\u5357",50:"\u91cd\u5e86",51:"\u56db\u5ddd",52:"\u8d35\u5dde",53:"\u4e91\u5357",54:"\u897f\u85cf",61:"\u9655\u897f",62:"\u7518\u8083",63:"\u9752\u6d77",64:"\u5b81\u590f",65:"\u65b0\u7586",71:"\u53f0\u6e7e",81:"\u9999\u6e2f",82:"\u6fb3\u95e8",91:"\u56fd\u5916"},check:function(b){var c={errorInfo:"\u8eab\u4efd\u8bc1\u53f7\u4e0d\u5408\u6cd5"};if(/(^\d{15}$)|(^\d{17}(\d|X)$)/.test(b)){c.cardNum=true}else{return c}c.area=window.ChinaAreaMap?window.ChinaAreaMap[b.substr(0,6)]:this.area[b.substr(0,2)];if(!c.area){return c}c.birth=this.getBirthday(b);if(!c.birth){return c}if(!this.checkParity(b)){return c}c.sex=(b.substring(16,17)|0)%2;c.errorInfo="";return c},checkParity:function(f){f=this.changeFivteenToEighteen(f);var c=f.length;if(c=="18"){var e=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var b=new Array("1","0","X","9","8","7","6","5","4","3","2");var h=0,g,d;for(g=0;g<17;g++){h+=f.substr(g,1)*e[g]}d=b[h%11];if(d==f.substr(17,1)){return true}return false}return false},changeFivteenToEighteen:function(d){if(d.length=="15"){var c=new Array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);var b=new Array("1","0","X","9","8","7","6","5","4","3","2");var f=0,e;d=d.substr(0,6)+"19"+d.substr(6,d.length-6);for(e=0;e<17;e++){f+=d.substr(e,1)*c[e]}d+=b[f%11];return d}return d},getBirthday:function(e){var b=e.length;if(b=="15"){var f=/^(\d{6})(\d{2})(\d{2})(\d{2})(\d{3})$/;var d=e.match(f);return{year:"19"+d[2],month:d[3],day:d[4]}}if(b=="18"){var c=/^(\d{6})(\d{4})(\d{2})(\d{2})(\d{3})([0-9]|X)$/;var d=e.match(c);return{year:d[2]|0,month:d[3]|0,day:d[4]|0}}return false}}})})(jQuery);
