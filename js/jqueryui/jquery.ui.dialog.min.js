/*! jQuery UI - v1.10.3 - 2013-05-03
 * http://jqueryui.com
 * Copyright 2013 jQuery Foundation and other contributors; Licensed MIT */
(function(f){var e={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},d={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};f.widget("ui.dialog",{version:"1.10.3",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,showTitle:true,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(a){var b=f(this).css(a).offset().top;0>b&&f(this).css("top",a.top-b)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&f.fn.draggable&&this._makeDraggable(),this.options.resizable&&f.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var a=this.options.appendTo;return a&&(a.jquery||a.nodeType)?f(a):this.document.find(a||"body").eq(0)},_destroy:function(){var b,a=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),b=a.parent.children().eq(a.index),b.length&&b[0]!==this.element[0]?b.before(this.element):a.parent.append(this.element)},widget:function(){return this.uiDialog},disable:f.noop,enable:f.noop,close:function(a){var b=this;this._isOpen&&this._trigger("beforeClose",a)!==!1&&(this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||f(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){b._trigger("close",a)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(c,b){var a=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return a&&!b&&this._trigger("focus",c),a},open:function(){var a=this;return this._isOpen?(this._moveToTop()&&this._focusTabbable(),undefined):(this._isOpen=!0,this.opener=f(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show,function(){a._focusTabbable(),a._trigger("focus")}),this._trigger("open"),undefined)},_focusTabbable:function(){var a=this.element.find("[autofocus]");a.length||(a=this.element.find(":tabbable")),a.length||(a=this.uiDialogButtonPane.find(":tabbable")),a.length||(a=this.uiDialogTitlebarClose.filter(":tabbable")),a.length||(a=this.uiDialog),a.eq(0).focus()},_keepFocus:function(a){function b(){var c=this.document[0].activeElement,h=this.uiDialog[0]===c||f.contains(this.uiDialog[0],c);h||this._focusTabbable()}a.preventDefault(),b.call(this),this._delay(b)},_createWrapper:function(){this.uiDialog=f("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(h){if(this.options.closeOnEscape&&!h.isDefaultPrevented()&&h.keyCode&&h.keyCode===f.ui.keyCode.ESCAPE){return h.preventDefault(),this.close(h),undefined}if(h.keyCode===f.ui.keyCode.TAB){var b=this.uiDialog.find(":tabbable"),a=b.filter(":first"),c=b.filter(":last");h.target!==c[0]&&h.target!==this.uiDialog[0]||h.shiftKey?h.target!==a[0]&&h.target!==this.uiDialog[0]||!h.shiftKey||(c.focus(1),h.preventDefault()):(a.focus(1),h.preventDefault())}},mousedown:function(a){this._moveToTop(a)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var a;this.uiDialogTitlebar=f("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(b){f(b.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=f("<button>Ã—</button>").addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(b){b.preventDefault(),this.close(b)}}),a=f("<div>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(a),this.uiDialog.attr({"aria-labelledby":a.attr("id")});if(this.options.showTitle===false){$(this.uiDialogTitlebar).hide();}},_title:function(a){this.options.title||a.html("&#160;"),a.html(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=f("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=f("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var a=this,b=this.options.buttons;return this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),f.isEmptyObject(b)||f.isArray(b)&&!b.length?(this.uiDialog.removeClass("ui-dialog-buttons"),undefined):(f.each(b,function(k,i){var c,l;i=f.isFunction(i)?{click:i,text:k}:i,i=f.extend({type:"button",className:"",buttonClassName:""},i),c=i.click,i.click=function(){c.apply(a.element[0],arguments)},l={icons:i.icons,text:i.showText,className:i.className,buttonClassName:i.buttonClassName},delete i.icons,delete i.showText,f("<button></button>",i).button(l).appendTo(a.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog),undefined)},_makeDraggable:function(){function b(g){return{position:g.position,offset:g.offset}}var a=this,c=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,g){f(this).addClass("ui-dialog-dragging"),a._blockFrames(),a._trigger("dragStart",i,b(g))},drag:function(i,g){a._trigger("drag",i,b(g))},stop:function(g,i){c.position=[i.position.left-a.document.scrollLeft(),i.position.top-a.document.scrollTop()],f(this).removeClass("ui-dialog-dragging"),a._unblockFrames(),a._trigger("dragStop",g,b(i))}})},_makeResizable:function(){function a(g){return{originalPosition:g.originalPosition,originalSize:g.originalSize,position:g.position,size:g.size}}var c=this,b=this.options,i=b.resizable,k=this.uiDialog.css("position"),l="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:b.maxWidth,maxHeight:b.maxHeight,minWidth:b.minWidth,minHeight:this._minHeight(),handles:l,start:function(h,g){f(this).addClass("ui-dialog-resizing"),c._blockFrames(),c._trigger("resizeStart",h,a(g))},resize:function(h,g){c._trigger("resize",h,a(g))},stop:function(g,h){b.height=f(this).height(),b.width=f(this).width(),f(this).removeClass("ui-dialog-resizing"),c._unblockFrames(),c._trigger("resizeStop",g,a(h))}}).css("position",k)},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(){var a=this.uiDialog.is(":visible");a||this.uiDialog.show(),this.uiDialog.position(this.options.position),a||this.uiDialog.hide()},_setOptions:function(a){var c=this,b=!1,h={};f.each(a,function(j,g){c._setOption(j,g),j in e&&(b=!0),j in d&&(h[j]=g)}),b&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",h)},_setOption:function(b,j){var c,a,i=this.uiDialog;"dialogClass"===b&&i.removeClass(this.options.dialogClass).addClass(j),"disabled"!==b&&(this._super(b,j),"appendTo"===b&&this.uiDialog.appendTo(this._appendTo()),"buttons"===b&&this._createButtons(),"closeText"===b&&this.uiDialogTitlebarClose.button({label:""+j}),"draggable"===b&&(c=i.is(":data(ui-draggable)"),c&&!j&&i.draggable("destroy"),!c&&j&&this._makeDraggable()),"position"===b&&this._position(),"resizable"===b&&(a=i.is(":data(ui-resizable)"),a&&!j&&i.resizable("destroy"),a&&"string"==typeof j&&i.resizable("option","handles",j),a||j===!1||this._makeResizable()),"title"===b&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var a,c,b,h=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),h.minWidth>h.width&&(h.width=h.minWidth),a=this.uiDialog.css({height:"auto",width:h.width}).outerHeight(),c=Math.max(0,h.minHeight-a),b="number"==typeof h.maxHeight?Math.max(0,h.maxHeight-a):"none","auto"===h.height?this.element.css({minHeight:c,maxHeight:b,height:"auto"}):this.element.height(Math.max(0,h.height-a)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var a=f(this);return f("<div>").css({position:"absolute",width:a.outerWidth(),height:a.outerHeight()}).appendTo(a.parent()).offset(a.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(a){return f(a.target).closest(".ui-dialog").length?!0:!!f(a.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var a=this,b=this.widgetFullName;f.ui.dialog.overlayInstances||this._delay(function(){f.ui.dialog.overlayInstances&&this.document.bind("focusin.dialog",function(c){a._allowInteraction(c)||(c.preventDefault(),f(".ui-dialog:visible:last .ui-dialog-content").data(b)._focusTabbable())})}),this.overlay=f("<div>").addClass("ui-widget-overlay ui-front").appendTo(this._appendTo()),this._on(this.overlay,{mousedown:"_keepFocus"}),f.ui.dialog.overlayInstances++}},_destroyOverlay:function(){this.options.modal&&this.overlay&&(f.ui.dialog.overlayInstances--,f.ui.dialog.overlayInstances||this.document.unbind("focusin.dialog"),this.overlay.remove(),this.overlay=null)}}),f.ui.dialog.overlayInstances=0,f.uiBackCompat!==!1&&f.widget("ui.dialog",f.ui.dialog,{_position:function(){var h,b=this.options.position,a=[],c=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0" in b)&&(a=b.split?b.split(" "):[b[0],b[1]],1===a.length&&(a[1]=a[0]),f.each(["left","top"],function(k,g){+a[k]===a[k]&&(c[k]=a[k],a[k]=g)}),b={my:a[0]+(0>c[0]?c[0]:"+"+c[0])+" "+a[1]+(0>c[1]?c[1]:"+"+c[1]),at:a.join(" ")}),b=f.extend({},f.ui.dialog.prototype.options.position,b)):b=f.ui.dialog.prototype.options.position,h=this.uiDialog.is(":visible"),h||this.uiDialog.show(),this.uiDialog.position(b),h||this.uiDialog.hide()}})})(jQuery);
